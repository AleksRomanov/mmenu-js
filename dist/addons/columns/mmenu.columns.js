Mmenu.addons.columns=function(){var s=this,m=this.opts.columns;if("boolean"==typeof m&&(m={add:m}),"number"==typeof m&&(m={add:!0,visible:m}),"object"!=typeof m&&(m={}),"number"==typeof m.visible&&(m.visible={min:m.visible,max:m.visible}),this.opts.columns=Mmenu.extend(m,Mmenu.options.columns),m.add){m.visible.min=Math.max(1,Math.min(6,m.visible.min)),m.visible.max=Math.max(m.visible.min,Math.min(6,m.visible.max));for(var i="",l="",e=0;e<=m.visible.max;e++)i+=" mm-menu_columns-"+e,l+=" mm-panel_columns-"+e;i.length&&(i=i.slice(1),l=l.slice(1));var a=l+" mm-panel_opened mm-panel_opened-parent mm-panel_highest";this.bind("openPanel:before",function(e){var n=e[0].mmParent;if(n&&(n=n.closest(".mm-panel")).length){var m=n[0].className;if(m&&(m=m.split("mm-panel_columns-")[1]))for(var i=parseInt(m.split(" ")[0],10)+1;0<i;){if(!(e=s.node.$pnls.children(".mm-panel_columns-"+i)).length){i=-1;break}i++,e.removeClass(a).addClass("mm-hidden")}}}),this.bind("openPanel:start",function(e){var n=s.node.$pnls.children(".mm-panel_opened-parent").length;e.hasClass("mm-panel_opened-parent")||n++,n=Math.min(m.visible.max,Math.max(m.visible.min,n)),s.node.menu.classList.remove(i.split(" ")),s.node.menu.classList.add("mm-menu_columns-"+n),s.node.$pnls.children(".mm-panel").removeClass(l).filter(".mm-panel_opened-parent").add(e).slice(-m.visible.max).each(function(e,n){Mmenu.$(n).addClass("mm-panel_columns-"+e)})})}},Mmenu.options.columns={add:!1,visible:{min:1,max:3}};