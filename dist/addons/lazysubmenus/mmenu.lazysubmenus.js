Mmenu.addons.lazySubmenus=function(){var t=this,n=this.opts.lazySubmenus;"boolean"==typeof n&&(n={load:n}),"object"!=typeof n&&(n={}),this.opts.lazySubmenus=Mmenu.extend(n,Mmenu.options.lazySubmenus),n.load&&(this.bind("initMenu:after",function(){var e=[];Mmenu.DOM.find(t.node.pnls,"li").forEach(function(n){e.push.apply(e,Mmenu.DOM.children(n,t.conf.panelNodetype.join(", ")))}),e.filter(function(n){return!n.matches(".mm-listview_inset")}).filter(function(n){return!n.matches(".mm-nolistview")}).filter(function(n){return!n.matches(".mm-nopanel")}).forEach(function(n){n.classList.add("mm-panel_lazysubmenu","mm-nolistview","mm-nopanel")})}),this.bind("initPanels:before",function(n){(n=n||Mmenu.DOM.children(t.node.pnls,t.conf.panelNodetype.join(", "))).forEach(function(n){var e=".mm-panel_lazysubmenu",m=Mmenu.DOM.find(n,e);n.matches(e)&&m.unshift(n),m.filter(function(n){return!n.matches(".mm-panel_lazysubmenu .mm-panel_lazysubmenu")}).forEach(function(n){n.classList.remove("mm-panel_lazysubmenu","mm-nolistview","mm-nopanel")})})}),this.bind("initOpened:before",function(){var e=[];Mmenu.DOM.find(t.node.pnls,"."+t.conf.classNames.selected).forEach(function(n){e.push.apply(e,Mmenu.DOM.parents(n,".mm-panel_lazysubmenu"))}),e.length&&(e.forEach(function(n){n.classList.remove("mm-panel_lazysubmenu","mm-nolistview mm-nopanel")}),t.initPanels([e[e.length-1]]))}),this.bind("openPanel:before",function(n){var e=".mm-panel_lazysubmenu",m=Mmenu.DOM.find(n,e);n.matches(e)&&m.unshift(n),(m=m.filter(function(n){return!n.matches(".mm-panel_lazysubmenu .mm-panel_lazysubmenu")})).length&&t.initPanels(m)}))},Mmenu.options.lazySubmenus={load:!1};