Mmenu.addons.drag=function(){var v=this;if(this.opts.offCanvas&&!("function"!=typeof Hammer||Hammer.VERSION<2)){var _=this.opts.drag,w=this.conf.drag;"boolean"==typeof _&&(_={menu:_,panels:_}),"object"!=typeof _&&(_={}),"boolean"==typeof _.menu&&(_={open:_.menu}),"object"!=typeof _.menu&&(_.menu={}),"boolean"==typeof _.panels&&(_.panels={close:_.panels}),"object"!=typeof _.panels&&(_.panels={}),this.opts.drag=Mmenu.extend(_,Mmenu.options.drag),_.menu.open&&this.bind("setPage:after",function(){var n,t,o,i={events:"panleft panright",typeLower:"x",typeUpper:"X",open_dir:"right",close_dir:"left",negative:!1},r="width",a=i.open_dir,m=function(e){e<=_.menu.maxStartPos&&(p=1)},s=function(){return Mmenu.$(".mm-slideout")},p=0,u=0,d=0,e=v.opts.extensions.all,l=void 0===e?"left":-1<e.indexOf("mm-menu_position-right")?"right":-1<e.indexOf("mm-menu_position-top")?"top":-1<e.indexOf("mm-menu_position-bottom")?"bottom":"left",c=void 0===e?"back":-1<e.indexOf("mm-menu_position-top")||-1<e.indexOf("mm-menu_position-bottom")||-1<e.indexOf("mm-menu_position-front")?"front":"back";switch(l){case"top":case"bottom":i.events="panup pandown",i.typeLower="y",i.typeUpper="Y",r="height"}switch(l){case"right":case"bottom":i.negative=!0,m=function(e){e>=Mmenu.$(window)[r]()-_.menu.maxStartPos&&(p=1)}}switch(l){case"right":i.open_dir="left",i.close_dir="right";break;case"top":i.open_dir="down",i.close_dir="up";break;case"bottom":i.open_dir="up",i.close_dir="down"}switch(c){case"front":s=function(){return Mmenu.$(this.node.menu)}}var f,h=Mmenu.valueOrFn(Mmenu.$(v.node.menu),_.menu.node,Mmenu.node.$page);"string"==typeof h&&(h=Mmenu.$(h));var g=new Hammer(h[0],v.opts.drag.vendors.hammer);g.on("panstart",function(e){m.call(v,e.center[i.typeLower]),f=s.call(v),a=i.open_dir}),g.on(i.events+" panend",function(e){0<p&&e.preventDefault()}),g.on(i.events,function(e){if(n=e["delta"+i.typeUpper],i.negative&&(n=-n),n!=u&&(a=u<=n?i.open_dir:i.close_dir),(u=n)>_.menu.threshold&&1==p){if(Mmenu.$("html").hasClass("mm-wrapper_opened"))return;p=2,v._openSetup(),v.trigger("open:start"),Mmenu.$("html").addClass("mm-wrapper_dragging"),d=b(Mmenu.$(window)[r]()*w.menu[r].perc,w.menu[r].min,w.menu[r].max)}2==p&&(t=b(u,10,d)-("front"==c?d:0),i.negative&&(t=-t),o="translate"+i.typeUpper+"("+t+"px )",f.css({"-webkit-transform":"-webkit-"+o,transform:o}))}),g.on("panend",function(e){2==p&&(Mmenu.$("html").removeClass("mm-wrapper_dragging"),f.css("transform",""),v[a==i.open_dir?"_openFinish":"close"]()),p=0})}),_.panels.close&&this.bind("initPanel:after",function(e){var n=e[0].mmParent;if(n){n=n.closest(".mm-panel");var t=new Hammer(e[0],v.opts.drag.vendors.hammer),o=null;t.on("panright",function(e){o||(v.openPanel(n),o=setTimeout(function(){clearTimeout(o),o=null},v.conf.openingInterval+v.conf.transitionDuration))})}})}function b(e,n,t){return e<n&&(e=n),t<e&&(e=t),e}},Mmenu.options.drag={menu:{open:!1,node:null,maxStartPos:100,threshold:50},panels:{close:!1},vendors:{hammer:{}}},Mmenu.configs.drag={menu:{width:{perc:.8,min:140,max:440},height:{perc:.8,min:140,max:880}}};