Mmenu.addons.columns=function(){var s=this,i=this.opts.columns;if("boolean"==typeof i&&(i={add:i}),"number"==typeof i&&(i={add:!0,visible:i}),"object"!=typeof i&&(i={}),"number"==typeof i.visible&&(i.visible={min:i.visible,max:i.visible}),this.opts.columns=Mmenu.extend(i,Mmenu.options.columns),i.add){i.visible.min=Math.max(1,Math.min(6,i.visible.min)),i.visible.max=Math.max(i.visible.min,Math.min(6,i.visible.max));for(var a="",l="",e=0;e<=i.visible.max;e++)a+=" mm-menu_columns-"+e,l+=" mm-panel_columns-"+e;a.length&&(a=a.slice(1),l=l.slice(1));var o=l+" mm-panel_opened mm-panel_opened-parent mm-panel_highest";this.bind("openPanel:before",function(e){var n=e.mmParent;if(n&&(n=n.closest(".mm-panel"))){var m=n.className;if(m.length&&(m=m.split("mm-panel_columns-")[1]))for(var i=parseInt(m.split(" ")[0],10)+1;0<i;){if(!(e=Mmenu.$(s.node.pnls).children(".mm-panel_columns-"+i)[0])){i=-1;break}i++,e.classList.remove(o),e.classList.add("mm-hidden")}}}),this.bind("openPanel:start",function(e){var n,m=Mmenu.$(s.node.pnls).children(".mm-panel_opened-parent").length;e.classList.contains("mm-panel_opened-parent")||m++,m=Math.min(i.visible.max,Math.max(i.visible.min,m)),(n=s.node.menu.classList).remove.apply(n,a.split(" ")),s.node.menu.classList.add("mm-menu_columns-"+m),Mmenu.$(s.node.pnls).children(".mm-panel").removeClass(l).filter(".mm-panel_opened-parent").add(e).slice(-i.visible.max).each(function(e,n){n.classList.add("mm-panel_columns-"+e)})})}},Mmenu.options.columns={add:!1,visible:{min:1,max:3}};