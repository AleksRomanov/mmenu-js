Mmenu.addons.pageScroll=function(){var o,l=this,e=this.opts.pageScroll,s=this.conf.pageScroll;function r(e){o&&o.length&&o.is(":visible")&&Mmenu.$("html, body").animate({scrollTop:o.offset().top+e}),o=Mmenu.$()}function i(e){try{return!("#"==e||"#"!=e.slice(0,1)||!Mmenu.node.page.querySelector(e))}catch(e){return!1}}if("boolean"==typeof e&&(e={scroll:e}),this.opts.pageScroll=Mmenu.extend(e,Mmenu.options.pageScroll),e.scroll&&this.bind("close:finish",function(){r(s.scrollOffset)}),this.opts.offCanvas&&e.scroll&&this.clck.push(function(e,n){if(o=Mmenu.$(),n.inMenu&&n.inListview){var t=e.getAttribute("href");if(i(t)){if(o=Mmenu.$(t),!l.node.menu.matches(".mm-menu_sidebar-expanded")||!document.documentElement.matches(".mm-wrapper_sidebar-expanded"))return{close:!0};r(l.conf.pageScroll.scrollOffset)}}}),e.update){var t=[],c=[];this.bind("initListview:after",function(e){var n=Mmenu.DOM.children(e.querySelector(".mm-listview"),"li");Mmenu.filterListItemAnchors(n).forEach(function(e){var n=e.getAttribute("href");i(n)&&t.push(n)}),c=t.reverse()});var f=-1;Mmenu.$(window).on("scroll.mm-pageScroll",function(e){for(var n=Mmenu.$(window).scrollTop(),t=0;t<c.length;t++)if(Mmenu.$(c[t]).offset().top<n+s.updateOffset){if(f!==t){f=t;var o=Mmenu.DOM.children(l.node.pnls,".mm-panel_opened")[0],r=Mmenu.DOM.find(o,".mm-listitem"),i=Mmenu.filterListItemAnchors(r).filter(function(e){return e.matches('[href="'+c[t]+'"]')})[0];i&&l.setSelected(i.parentElement)}break}})}},Mmenu.options.pageScroll={scroll:!1,update:!1},Mmenu.configs.pageScroll={scrollOffset:0,updateOffset:50};