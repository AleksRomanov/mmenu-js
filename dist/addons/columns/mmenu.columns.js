Mmenu.addons.columns=function(){var s=this,a=this.opts.columns;if("boolean"==typeof a&&(a={add:a}),"number"==typeof a&&(a={add:!0,visible:a}),"object"!=typeof a&&(a={}),"number"==typeof a.visible&&(a.visible={min:a.visible,max:a.visible}),this.opts.columns=Mmenu.extend(a,Mmenu.options.columns),a.add){a.visible.min=Math.max(1,Math.min(6,a.visible.min)),a.visible.max=Math.max(a.visible.min,Math.min(6,a.visible.max));for(var l="",o="",e=0;e<=a.visible.max;e++)l+=" mm-menu_columns-"+e,o+=" mm-panel_columns-"+e;l.length&&(l=l.slice(1),o=o.slice(1));var t=o+" mm-panel_opened mm-panel_opened-parent mm-panel_highest";this.bind("openPanel:before",function(e){var n;if(e&&(n=e.mmParent),n&&(n=n.closest(".mm-panel"))){var m=n.className;if(m.length&&(m=m.split("mm-panel_columns-")[1]))for(var i=parseInt(m.split(" ")[0],10)+1;0<i;){if(!(e=Mmenu.DOM.children(s.node.pnls,".mm-panel_columns-"+i)[0])){i=-1;break}i++,e.classList.remove(t),e.classList.add("mm-hidden")}}}),this.bind("openPanel:start",function(e){var n,m=Mmenu.DOM.children(s.node.pnls,".mm-panel_opened-parent").length;e.matches(".mm-panel_opened-parent")||m++,m=Math.min(a.visible.max,Math.max(a.visible.min,m)),(n=s.node.menu.classList).remove.apply(n,l.split(" ")),s.node.menu.classList.add("mm-menu_columns-"+m);var i=[];Mmenu.DOM.children(s.node.pnls,".mm-panel").forEach(function(e){var n;(n=e.classList).remove.apply(n,o.split(" ")),e.matches(".mm-panel_opened-parent")&&i.push(e)}),i.push(e),i.slice(-a.visible.max).forEach(function(e,n){e.classList.add("mm-panel_columns-"+n)})})}},Mmenu.options.columns={add:!1,visible:{min:1,max:3}};