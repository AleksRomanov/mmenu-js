Mmenu.addons.iconPanels=function(){var i=this,a=this.opts.iconPanels,t=!1;if("boolean"==typeof a&&(a={add:a}),"number"!=typeof a&&"string"!=typeof a||(a={add:!0,visible:a}),"object"!=typeof a&&(a={}),"first"==a.visible&&(t=!0,a.visible=1),this.opts.iconPanels=Mmenu.extend(a,Mmenu.options.iconPanels),a.visible=Math.min(3,Math.max(1,a.visible)),a.visible++,a.add){this.bind("initMenu:after",function(){var e,n=["mm-menu_iconpanel"];a.hideNavbar&&n.push("mm-menu_hidenavbar"),a.hideDivider&&n.push("mm-menu_hidedivider"),(e=i.node.menu.classList).add.apply(e,n)});var s="";if(!t){for(var e=0;e<=a.visible;e++)s+=" mm-panel_iconpanel-"+e;s.length&&(s=s.slice(1))}function n(e){if(!e.parentElement.matches(".mm-listitem_vertical")){var n=Mmenu.DOM.children(this.node.pnls,".mm-panels");t?n.forEach(function(e,n){e.classList[0==n?"add":"remove"]("mm-panel_iconpanel-first")}):(n.forEach(function(e){e.classList.remove(s)}),(n=n.filter(function(e){return e.matches(".mm-panel_opened-parent")})).push(e),n.forEach(function(e){e.classList.remove("mm-hidden")}),(n=n.slice(-a.visible)).forEach(function(e,n){e.classList.add("mm-panel_iconpanel-"+n)}))}}this.bind("openPanel:start",n),this.bind("initPanels:after",function(e){n.call(i,Mmenu.DOM.children(i.node.pnls,".mm-panel_opened")[0])}),this.bind("initListview:after",function(e){if(a.blockPanel&&!e.parentElement.matches(".mm-listitem_vertical")&&!Mmenu.DOM.children(e,".mm-panel__blocker")[0]){var n=Mmenu.DOM.create("a.mm-panel__blocker");n.setAttribute("href",e.closest(".mm-panel").id),e.prepend(n)}})}},Mmenu.options.iconPanels={add:!1,blockPanel:!0,hideDivider:!1,hideNavbar:!0,visible:3};