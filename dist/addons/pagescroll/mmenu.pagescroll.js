Mmenu.addons.pageScroll=function(){var l,i=this,e=this.opts.pageScroll,o=this.conf.pageScroll;function r(e){l&&l.length&&l.is(":visible")&&Mmenu.$("html, body").animate({scrollTop:l.offset().top+e}),l=Mmenu.$()}function s(e){try{return!("#"==e||"#"!=e.slice(0,1)||!Mmenu.node.page.querySelector(e))}catch(e){return!1}}if("boolean"==typeof e&&(e={scroll:e}),this.opts.pageScroll=Mmenu.extend(e,Mmenu.options.pageScroll),e.scroll&&this.bind("close:finish",function(){r(o.scrollOffset)}),this.opts.offCanvas&&e.scroll&&this.clck.push(function(e,n){if(l=Mmenu.$(),n.inMenu&&n.inListview){var t=e.getAttribute("href");if(s(t)){if(l=Mmenu.$(t),!i.node.menu.classList.contains("mm-menu_sidebar-expanded")||!Mmenu.$("html").hasClass("mm-wrapper_sidebar-expanded"))return{close:!0};r(i.conf.pageScroll.scrollOffset)}}}),e.update){var c=[],a=[];this.bind("initListview:after",function(e){var n=Array.prototype.slice.call(Mmenu.$(e).find(".mm-listview").children("li"));Mmenu.filterListItemAnchors(n).each(function(e,n){var t=n.getAttribute("href");s(t)&&c.push(t)}),a=c.reverse()});var f=-1;Mmenu.$(window).on("scroll.mm-pageScroll",function(e){for(var n=Mmenu.$(window).scrollTop(),t=0;t<a.length;t++)if(Mmenu.$(a[t]).offset().top<n+o.updateOffset){if(f!==t){f=t;var l=Array.prototype.slice.call(Mmenu.$(i.node.pnls).children(".mm-panel_opened").find(".mm-listview").children("li"));i.setSelected(Mmenu.$(Mmenu.filterListItemAnchors(l).filter('[href="'+a[t]+'"]').parent())[0])}break}})}},Mmenu.options.pageScroll={scroll:!1,update:!1},Mmenu.configs.pageScroll={scrollOffset:0,updateOffset:50};