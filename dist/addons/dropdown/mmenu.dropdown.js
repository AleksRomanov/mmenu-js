Mmenu.addons.dropdown=function(){var n=this;if(this.opts.offCanvas){var v=this.opts.dropdown,x=this.conf.dropdown;if("boolean"==typeof v&&v&&(v={drop:v}),"object"!=typeof v&&(v={}),"string"==typeof v.position&&(v.position={of:v.position}),this.opts.dropdown=Mmenu.extend(v,Mmenu.options.dropdown),v.drop){var M;this.bind("initMenu:after",function(){if(n.node.menu.classList.add("mm-menu_dropdown"),"string"!=typeof v.position.of){var t=n.vars.orgMenuId;t&&t.length&&(v.position.of='[href="#'+t+'"]')}if("string"==typeof v.position.of){M=Mmenu.$(v.position.of);var o=v.event.split(" ");1==o.length&&(o[1]=o[0]),"hover"==o[0]&&M.on("mouseenter.mm-dropdown",function(){n.open()}),"hover"==o[1]&&Mmenu.$(n.node.menu).on("mouseleave.mm-dropdown",function(){n.close()})}}),this.bind("open:start",function(){n.node.menu.mmStyle=n.node.menu.getAttribute("style")||"",Mmenu.$("html").addClass("mm-wrapper_dropdown")}),this.bind("close:finish",function(){n.node.menu.setAttribute("style",n.node.menu.mmStyle),Mmenu.$("html").removeClass("mm-wrapper_dropdown")});var o=function(t,o){var n,e,i=o[0],s=o[1],m="x"==t?"scrollLeft":"scrollTop",p="x"==t?"outerWidth":"outerHeight",r="x"==t?"left":"top",d="x"==t?"right":"bottom",u="x"==t?"width":"height",f="x"==t?"maxWidth":"maxHeight",a=null,l=Mmenu.$(window)[m](),h=M.offset()[r]-=l,c=h+M[p](),w=Mmenu.$(window)[u](),b=x.offset.button[t]+x.offset.viewport[t];if(v.position[t])switch(v.position[t]){case"left":case"bottom":a="after";break;case"right":case"top":a="before"}return null===a&&(a=h+(c-h)/2<w/2?"after":"before"),"after"==a?(e=w-((n="x"==t?h:c)+b),i[r]=n+x.offset.button[t],i[d]="auto",v.tip&&s.push("mm-menu_tip-"+("x"==t?"left":"top"))):(e=(n="x"==t?c:h)-b,i[d]="calc( 100% - "+(n-x.offset.button[t])+"px )",i[r]="auto",v.tip&&s.push("mm-menu_tip-"+("x"==t?"right":"bottom"))),v.fitViewport&&(i[f]=Math.min(x[u].max,e)),[i,s]};this.bind("open:start",e),Mmenu.$(window).on("resize.mm-dropdown",function(t){e.call(n)}),this.opts.offCanvas.blockUI||Mmenu.$(window).on("scroll.mm-dropdown",function(t){e.call(n)})}}function e(){if(this.vars.opened){this.node.menu.setAttribute("style",this.node.menu.mmStyle);var t=[{},[]];t=o.call(this,"y",t),t=o.call(this,"x",t),Mmenu.$(this.node.menu).css(t[0]),v.tip&&(this.node.menu.classList.remove("mm-menu_tip-left","mm-menu_tip-right","mm-menu_tip-top","mm-menu_tip-bottom"),this.node.menu.classList.add(t[1]))}}},Mmenu.options.dropdown={drop:!1,fitViewport:!0,event:"click",position:{},tip:!0},Mmenu.configs.dropdown={offset:{button:{x:-5,y:5},viewport:{x:20,y:20}},height:{max:880},width:{max:440}};